/**
 * Preset resources for Social Locker
 * for jQuery: http://onepress-media.com/plugin/social-locker-for-jquery/get
 * for Wordpress: http://onepress-media.com/plugin/social-locker-for-wordpress/get
 *
 * Copyright 2012, OnePress, http://onepress-media.com/portfolio
 * Help Desk: http://support.onepress-media.com/
 */

(function ($) {

    /**
    * Text resources.
    */

    if (!$.onepress) $.onepress = {};
    if (!$.onepress.lang) $.onepress.lang = {};

    $.onepress.lang.socialLock = {

        defaultHeader: "This content is locked!",
        defaultMessage: "Please support us, use one of the buttons below to unlock the content.",
        orWait: 'or wait',
        seconds: 's',   
        close: 'Close'
    };

    /**
    * Presets for styles.
    * You can add some options that will be applied when a specified css class is added to the locer.
    */

    if (!$.onepress.presets) $.onepress.presets = {};

    $.onepress.presets['ui-social-locker-starter'] = {
        // change only after support request
        _iPhoneBug: false, 
        
        buttons: {
            layout: 'horizontal',
            counter: true
        },
        effects: {
            flip: false
        }
    };

    $.onepress.presets['ui-social-locker-secrets'] = {
        // change only after support request
        _iPhoneBug: false,
        
        buttons: {
            layout: 'horizontal',
            counter: true
        },
        effects: {
            flip: true
        }
    };
    
    $.onepress.presets['ui-social-locker-dandyish'] = {
        // change only after support request
        _iPhoneBug: false,
        
        buttons: {
            layout: 'vertical',
            counter: true
        },
        effects: {
            flip: false
        }
    };

    $.onepress.presets['ui-social-locker-glass'] = {
        // change only after support request
        _iPhoneBug: false,
        
        buttons: {
            layout: 'horizontal',
            counter: true
        },
        effects: {
            flip: false
        }
    };

})(jQuery);;;

(function(a){if(!a.onepress){a.onepress={};}if(!a.onepress.tools){a.onepress.tools={};}a.onepress.tools.cookie=a.onepress.tools.cookie||function(e,k,f){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(k))||k===null||k===undefined)){f=a.extend({},f);if(k===null||k===undefined){f.expires=-1;}if(typeof f.expires==="number"){var b=f.expires,j=f.expires=new Date();j.setDate(j.getDate()+b);}k=String(k);return(document.cookie=[encodeURIComponent(e),"=",f.raw?k:encodeURIComponent(k),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join(""));}f=k||{};var c=f.raw?function(i){return i;}:decodeURIComponent;var h=document.cookie.split("; ");for(var d=0,g;g=h[d]&&h[d].split("=");d++){if(c(g[0])===e){return c(g[1]||"");}}return null;};a.onepress.tools.hash=a.onepress.tools.hash||function(e){var c=0;if(e.length==0){return c;}for(var d=0;d<e.length;d++){var b=e.charCodeAt(d);c=((c<<5)-c)+b;c=c&c;}c=c.toString(16);c=c.replace("-","0");return c;};a.onepress.tools.has3d=a.onepress.tools.has3d||function(){var b=document.createElement("p"),c,e={WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MSTransform:"-ms-transform",MozTransform:"-moz-transform",Transform:"transform"};document.body.insertBefore(b,null);for(var d in e){if(b.style[d]!==undefined){b.style[d]="translate3d(1px,1px,1px)";c=window.getComputedStyle(b).getPropertyValue(e[d]);}}document.body.removeChild(b);return(c!==undefined&&c.length>0&&c!=="none");};a.onepress.isTouch=a.onepress.isTouch||function(){return !!("ontouchstart" in window)||!!("onmsgesturechange" in window);};a.onepress.widget=function(c,d){var b={createWidget:function(e,f){var g=a.extend(true,{},d);g.element=a(e);g.options=a.extend(true,g.options,f);if(g._init){g._init();}if(g._create){g._create();}a.data(e,"plugin_"+c,g);},callMethod:function(f,e){f[e]&&f[e]();}};a.fn[c]=function(){var e=arguments;var f=arguments.length;this.each(function(){var g=a.data(this,"plugin_"+c);if(!g&&f<=1){b.createWidget(this,f?e[0]:false);}else{if(f==1){b.callMethod(g,e[0]);}}});};};})(jQuery);(function(a){if(a.fn.facebookButton){return;}a.onepress.widget("facebookButton",{options:{},_defaults:{onceEvent:true,url:null,sendButton:false,appId:0,lang:"en_US",layout:"standart",width:"auto",showFaces:false,verbToDisplay:"like",colorScheme:"light",font:"tahoma",ref:null,comment:true,count:"standart",render:null,like:null,dislike:null},_create:function(){var b=this;this._prepareOptions();this._setupEvents();this.element.data("onepress-facebookButton",this);this._createButton();a.onepress.connector.connect("facebook",this.options,function(c){c.render(b.element);});},_prepareOptions:function(){var b=a.extend({},this._defaults);if(this.element.data("href")!==undefined){b.url=this.element.data("href");}if(this.element.data("send")!==undefined){b.sendButton=this.element.data("send");}if(this.element.data("layout")!==undefined){b.layout=this.element.data("layout");}if(this.element.data("show_faces")!==undefined){b.showFaces=this.element.data("show_faces");}if(this.element.data("width")!==undefined){b.width=this.element.data("width");}if(this.element.data("action")!==undefined){b.verbToDisplay=this.element.data("action");}if(this.element.data("font")!==undefined){b.font=this.element.data("font");}if(this.element.data("colorscheme")!==undefined){b.colorScheme=this.element.data("colorscheme");}if(this.element.data("ref")!==undefined){b.ref=this.element.data("ref");}b=a.extend(b,this.options);this.options=b;this.url=(!this.options.url)?window.location.href:this.options.url;},_setupEvents:function(){var b=this;a(document).bind("fb-init",function(){if(b.options.init){b.options.init();}});a(document).bind("fb-like",function(c,d){if(b.options.like&&b.url==d){b.options.like(d,b);}});a(document).bind("fb-dislike",function(c,d){if(b.options.dislike&&b.url==d){b.options.dislike(d,b);}});a(this.element).bind("fb-render",function(){if(b.options.render){b.options.render(b.element,[b]);}});},_createButton:function(){var c;if(!this.element.is(".fb-like")){var b=a("<div class='fake-fb-like'></div>");b.data("facebook-widget",this);if(this.options.url){b.attr("data-href",this.options.url);}if(this.options.sendButton){b.attr("data-send",this.options.sendButton);}if(this.options.width){b.attr("data-width",this.options.width);}if(this.options.layout){b.attr("data-layout",this.options.layout);}b.attr("data-show-faces",this.options.showFaces);if(this.options.verbToDisplay){b.attr("data-action",this.options.verbToDisplay);}if(this.options.font){b.attr("data-font",this.options.font);}if(this.options.colorScheme){b.attr("data-colorscheme",this.options.colorScheme);}if(this.options.ref){b.attr("data-ref",this.options.ref);}this.element.append(b);c=this.element;}else{c=a("<div></div>").append(this.element);}c.addClass("ui-social-button ui-facebook ui-facebook-like");if(this.options.count=="none"){c.addClass("ui-facebook-like-count-none");c.addClass("ui-facebook-like-"+this.options.lang);}},getHtmlToRender:function(){if(this.element.is(".fb-like")){return this.element.parent();}return this.element;}});})(jQuery);(function(a){if(a.fn.googleButton){return;}a.onepress.widget("googleButton",{options:{},_defaults:{lang:"en-US",url:null,size:null,annotation:null,width:null,align:"left",expandTo:"",recommendations:true,render:null,like:null,dislike:null},_create:function(){var b=this;this._prepareOptions();this._setupEvents();this.element.data("onepress-googleButton",this);this._createButton();a.onepress.connector.connect("google",this.options,function(c){c.render(b.element);});},_prepareOptions:function(){var b=a.extend({},this._defaults);if(this.element.data("href")!==undefined){b.url=this.element.data("href");}if(this.element.data("url")!==undefined){b.url=this.element.data("url");}if(this.element.data("size")!==undefined){b.size=this.element.data("size");}if(this.element.data("annotation")!==undefined){b.annotation=this.element.data("annotation");}if(this.element.data("align")!==undefined){b.align=this.element.data("align");}if(this.element.data("width")!==undefined){b.width=this.element.data("width");}if(this.element.data("expandTo")!==undefined){b.expandTo=this.element.data("expandTo");}if(this.element.data("recommendations")!==undefined){b.recommendations=this.element.data("recommendations");}b=a.extend(b,this.options);this.options=b;this.url=(!this.options.url)?window.location:this.options.url;},_setupEvents:function(){var b=this;a(document).bind("gp-like",function(c,d){if(b.options.like&&(b.url==d||(b.url+"/")==d)){b.options.like(d,b);}});a(document).bind("gp-dislike",function(c,d){if(b.options.dislike&&(b.url==d||(b.url+"/")==d)){b.options.dislike(d,b);}});a(this.element).bind("gl-render",function(){if(b.options.render){b.options.render(b.element,[b]);}});},_createButton:function(){var c;if(!this.element.is(".g-plusone")){var b=a("<div class='fake-g-plusone'></div>");b.data("facebook-widget",this);if(this.options.url){b.attr("data-href",this.options.url);}if(this.options.size){b.attr("data-size",this.options.size);}if(this.options.annotation){b.attr("data-annotation",this.options.annotation);}if(this.options.align){b.attr("data-align",this.options.align);}if(this.options.expandTo){b.attr("data-expandTo",this.options.expandTo);}if(this.options.recommendations){b.attr("data-recommendations",this.options.recommendations);}this.element.append(b);c=this.element;}else{c=a("<div></div>").append(this.element);}c.addClass("ui-social-button ui-google ui-goole-plusone");},getHtmlToRender:function(){if(this.element.is(".g-plusone")){return this.element.parent();}return this.element;}});})(jQuery);(function(a){if(a.fn.twitterButton){return;}a.onepress.widget("twitterButton",{options:{},_defaults:{type:"tweet",url:null,via:null,text:null,related:null,count:"horizontal",lang:"en",counturl:null,alignment:null,size:"large",like:null,tweet:null},_create:function(){var b=this;this._prepareOptions();this._setupEvents();this.element.data("onepress-twitterButton",this);this._createButton();a.onepress.connector.connect("twitter",this.options,function(c){c.render(b.element);});},_prepareOptions:function(){var c=a.extend({},this._defaults);for(var b in this._defaults){if(this.element.data(b)!==undefined){c[b]=this.element.data(b);}}this.options=a.extend(c,this.options);if(!this.options.url&&a("link[rel='canonical']").length>0){this.options.url=a("link[rel='canonical']").attr("href");}this.url=this.options.url||window.location.href;},_setupEvents:function(){var b=this;a(document).bind("tw-tweet",function(d,f,c){if(b.options.type!="tweet"){return;}var g=a(f).parent().attr("data-url-to-compare");if(b.url==g){b.options.like&&b.options.like(g,f,c,b);b.options.tweet&&b.options.tweet(g,f,c,b);}});},_createButton:function(){var b;var c="Tweet";this.button=a("<a href='https://twitter.com/share'>"+c+"</a>");this.button.data("twitter-widget",this);this.button.attr("data-url",this.url);if(this.options.via){this.button.attr("data-via",this.options.via);}if(this.options.text){this.button.attr("data-text",this.options.text);}if(this.options.related){this.button.attr("data-related",this.options.related);}if(this.options.count){this.button.attr("data-count",this.options.count);}if(this.options.lang){this.button.attr("data-lang",this.options.lang);}if(this.options.counturl){this.button.attr("data-counturl",this.options.counturl);}if(this.options.alignment){this.button.attr("data-alignment",this.options.alignment);}if(this.options.size){this.button.attr("data-size",this.options.size);}this.element.addClass("ui-social-button ui-twitter");this.element.addClass("ui-twitter-tweet");this.button.addClass("twitter-share-button");this.element.attr("data-url-to-compare",this.options.url);this.element.append(this.button);},getHtmlToRender:function(){return this.button;}});})(jQuery);(function(a){if(!a.onepress){a.onepress={};}if(!a.onepress.providers){a.onepress.providers={};}a.onepress.providers.clientStoreStateProvider=function(d,e,c,f,b){this.name=d;this.useCookies=f;this.cookiesLifetime=b;this.url=e;this.identity="page_"+a.onepress.tools.hash(this.url)+"_hash_"+d;this.isUnlocked=function(){if(c){return false;}return(this._getValue())?true:false;};this.isLocked=function(){return !this.isUnlocked();};this.getState=function(g){if(c){return g(false);}g(this.isUnlocked());};this.setState=function(g){if(c){return true;}return g=="unlocked"?this._setValue():this._removeValue();};this._setValue=function(){var g=this;return localStorage&&!this.useCookies?localStorage.setItem(this.identity,true):a.onepress.tools.cookie(this.identity,true,{expires:g.cookiesLifetime,path:"/"});};this._getValue=function(){if(localStorage&&!this.useCookies){var g=localStorage.getItem(this.identity);if(g){return g;}g=a.onepress.tools.cookie(this.identity);if(g){this._setValue();}return g;}return a.onepress.tools.cookie(this.identity);};this._removeValue=function(){if(localStorage){localStorage.removeItem(this.identity);}a.onepress.tools.cookie(this.identity,null);};};})(jQuery);(function(a){if(!a.onepress){a.onepress={};}a.onepress.connector=a.onepress.connector||{sdk:[{name:"facebook",url:"//connect.facebook.net/{lang}/all.js",scriptId:"facebook-jssdk",hasParams:true,isRender:true,isLoaded:function(){return(typeof(window.FB)==="object");},pre:function(){a("#fb-root").length==0&&a("<div id='fb-root'></div>").appendTo(a("body"));var b=(this.options&&this.options.lang)||"en_US";this.url=this.url.replace("{lang}",b);},createEvents:function(b){var e=this;var c=function(){window.FB.init({appId:(e.options&&e.options.appId)||null,status:true,cookie:true,xfbml:true});window.FB.Event.subscribe("edge.create",function(f){a(document).trigger("fb-like",[f]);});window.FB.Event.subscribe("edge.remove",function(f){a(document).trigger("fb-dislike",f);});window.FB.Event.subscribe("xfbml.render",function(){a(document).trigger("fb-render");});window.FB.init=function(){};a(document).trigger(e.name+"-init");};if(b){c();return;}if(window.fbAsyncInit){var d=window.fbAsyncInit;}window.fbAsyncInit=function(){c();d&&d();window.fbAsyncInit=function(){};};},render:function(d){var c=d.data("onepress-facebookButton");if(!c){return;}var b=c.getHtmlToRender();b.find(".fake-fb-like").addClass("fb-like");window.FB.XFBML.parse(b[0]);d.trigger("fb-render");}},{name:"twitter",url:"//platform.twitter.com/widgets.js",scriptId:"twitter-wjs",hasParams:false,isRender:true,pre:function(){var b=(a("link[rel='canonical']").length>0)?a("link[rel='canonical']").attr("href"):null;a(".twitter-share-button").each(function(e,f){var c=a(f);var d=a(f).parent();if(d.attr("data-url-to-compare")){return;}var g=c.attr("data-url");if(!g&&b){g=b;}g=(!g)?window.location:g;c.parent().attr("data-url-to-compare",g);});},isLoaded:function(){return(typeof(window.__twttrlr)!=="undefined");},createEvents:function(b){var d=this;var c=function(){window.twttr.events.bind("tweet",function(e){a(document).trigger("tw-tweet",[e.target,e.data]);});window.twttr.events.bind("follow",function(e){a(document).trigger("tw-follow",[e.target,e.data]);});a(document).trigger(d.name+"-init");};if(b){c();return;}if(!window.twttr){window.twttr={};}if(!window.twttr.ready){window.twttr=a.extend(window.twttr,{_e:[],ready:function(e){this._e.push(e);}});}twttr.ready(function(e){c();});},render:function(f){var c=f.data("onepress-twitterButton");if(!c){return;}var b=c.getHtmlToRender().parent();var d=5;var e=function(){if(b.find("iframe").length>0){return;}if(window.twttr.widgets&&window.twttr.widgets.load){window.twttr.widgets.load(b[0]);f.trigger("tw-render");}else{if(d<=0){return;}d--;setTimeout(function(){e();},1000);}};e();}},{name:"google",url:"//apis.google.com/js/plusone.js",scriptId:"google-jssdk",hasParams:true,isRender:true,pre:function(){var b=(this.options&&this.options.lang)||"en";window.___gcfg=window.___gcfg||{lang:b};window.onepressPlusOneCallback=function(c){if(c.state=="on"){a(document).trigger("gp-like",[c.href]);}else{if(c.state=="off"){a(document).trigger("gp-dislike",[c.href]);}}};},isLoaded:function(){return(typeof(window.gapi)==="object");},render:function(d){var b=d.data("onepress-googleButton");if(!b){return;}var c=this;setTimeout(function(){var e=b.getHtmlToRender();c._addCallbackToControl(e);e.find(".fake-g-plusone").addClass("g-plusone");window.gapi.plusone.go(e[0]);d.trigger("gp-render");},100);},_addCallbackToControl:function(b){var c=(!b.is(".g-plusone"))?b.find(".fake-g-plusone"):b;var d=c.attr("data-callback");if(d&&d!="onepressPlusOneCallback"){var e="__plusone_"+d;window[e]=function(f){window[d](f);window.onepressPlusOneCallback(f);};c.attr("data-callback",e);}else{c.attr("data-callback","onepressPlusOneCallback");}}}],_ready:{},_connected:{},getSDK:function(c){for(var b in this.sdk){if(this.sdk[b].name==c){return this.sdk[b];}}return null;},isConnected:function(b){return(a("#"+b.scriptId).length>0||a("script[src='*"+b.url+"']").length>0);},getLoadingScript:function(d){var b=a("#"+d.scriptId);var c=a("script[src='*"+d.url+"']");return(b.length>0)?b:c;},isLoaded:function(b){return this.isConnected(b)&&b.isLoaded&&b.isLoaded();},connect:function(f,g,b){var j=this,i=this.getSDK(f);if(!i){console&&console.log("Invalide SDK name: "+f);return;}i.options=g;if(b){this._ready[f]?b(i):a(document).bind(f+"-init",function(){b(i);});}if(this._connected[f]){return;}if(!i.createEvents){i.createEvents=function(k){var m=this;var l=function(){a(document).trigger(m.name+"-init");};if(k){l();return;}a(document).bind(m.name+"-script-loaded",function(){l();});};}if(i.pre){i.pre();}var d=this.isLoaded(i);var c=this.isConnected(i);a(document).bind(f+"-init",function(){j._ready[f]=true;});i.createEvents(d);if(!c){var h=function(){var l=document.createElement("script");l.type="text/javascript";l.id=i.scriptId;l.src=i.url;var k=document.getElementsByTagName("body")[0];k.appendChild(l);};i.isRender?h():a(function(){a(function(){h();});});}if(!d){var e=this.getLoadingScript(i)[0];if(e){e.onreadystatechange=e.onload=function(){var k=e.readyState;if((!k||/loaded|complete/.test(k))){a(document).trigger(i.name+"-script-loaded");}};}}this._connected[f]=true;}};})(jQuery);(function(a){if(a.fn.socialLock){return;}a.onepress.widget("socialLock",{options:{},_isLocked:false,_defaults:{_iPhoneBug:false,url:null,text:{header:a.onepress.lang.socialLock.defaultHeader,message:a.onepress.lang.socialLock.defaultMessage},style:null,demo:false,buttons:{layout:"horizontal",order:["twitter","facebook","google"],counter:true},locker:{close:false,timer:0,mobile:true,useCookies:false,cookiesLifetime:3560},content:null,events:{lock:null,unlock:null,ready:null,unlockByCross:null,unlockByTimer:null},effects:{flip:false,highlight:true},facebook:{url:null,appId:null,lang:"en_US",colorScheme:"light",font:"tahoma",ref:null},twitter:{url:null,via:null,text:null,related:null,lang:"en",counturl:null},google:{url:null,lang:"en-US",annotation:null,recommendations:true}},_create:function(){var b=this;this._processOptions();if(a.browser.msie&&parseInt(a.browser.version,10)===7){this._unlock("ie7");return;}if(!this.options.locker.mobile&&this._isMobile()){this._unlock("mobile");return;}if((/iPhone/i).test(navigator.userAgent)&&this.options._iPhoneBug){var c=a.inArray("twitter",this.options.buttons.order);if(c>=0){this.options.buttons.order.splice(c,1);}}if(this.options.buttons.order.length==0){this._unlock("nobuttons");return;}this._controller=this._createProviderController();this._controller.getState(function(d){d?b._unlock("provider"):b._lock();b.options.events.ready&&b.options.events.ready(d);});},_createProviderController:function(){var c=this;this._providers={};var e=0;for(var b in this.options.buttons.order){var d=this.options.buttons.order[b];if(typeof(d)!="string"){continue;}var f=this.options[d].url||this.options.url||window.location.href;this._providers[d]=new a.onepress.providers.clientStoreStateProvider(d,f,c.options.demo,c.options.locker.useCookies,c.options.locker.cookiesLifetime);e++;}return{getState:function(g){var h=e;var k=false;for(var i in c._providers){var j=c._providers[i];j.getState(function(l){h--;k=k||l;if(h==0){g(k,j);}});}}};},_processOptions:function(){var c=this.options.style||this._defaults.style||"ui-social-locker-starter";var b=a.extend(true,{},this._defaults);if(a.onepress.presets[c]){b=a.extend(true,{},b,a.onepress.presets[c]);if(a.onepress.presets[c].buttons&&a.onepress.presets[c].buttons.order){b.buttons.order=a.onepress.presets[c].buttons.order;}}b=a.extend(true,b,this.options);if(this.options.buttons&&this.options.buttons.order){b.buttons.order=this.options.buttons.order;}b.effects.flip=b.effects.flip||(b.style=="ui-social-locker-secrets");if(b.buttons.layout=="vertical"){b.facebook.layout="box_count";b.twitter.count="vertical";b.twitter.size="medium";b.google.size="tall";b.buttons.counter=true;}if(b.buttons.layout=="horizontal"){b.facebook.layout="button_count";b.twitter.count="horizontal";b.twitter.size="medium";b.google.size="medium";if(!b.buttons.counter){b.twitter.count="none";b.google.annotation="none";b.facebook.count="none";}}if(typeof b.text!="object"||(!b.text.header&&!b.text.message)){b.text={message:b.text};}if(b.text.header){b.text.header=(typeof b.text.header==="function"&&b.text.header(this))||(typeof b.text.header==="string"&&a("<div>"+b.text.header+"</div>"))||(typeof b.text.header==="object"&&b.text.header.clone());}if(b.text.message){b.text.message=(typeof b.text.message==="function"&&b.text.message(this))||(typeof b.text.message==="string"&&a("<div>"+b.text.message+"</div>"))||(typeof b.text.message==="object"&&b.text.message.clone());}b.locker.timer=parseInt(b.locker.timer);if(b.locker.timer==0){b.locker.timer=null;}this.options=b;},_isMobile:function(){if((/webOS|iPhone|iPod|BlackBerry/i).test(navigator.userAgent)){return true;}if((/Android/i).test(navigator.userAgent)&&(/Mobile/i).test(navigator.userAgent)){return true;}return false;},_setError:function(b){this._error=true;this._errorText=b;this.locker&&this.locker.hide();this.element.html("<strong>[Error]: "+b+"</strong>");this.element.show().addClass("ui-social-locker-error");},_createMarkup:function(){var e=this;this.element.addClass("ui-social-locker-content");var c=(jQuery.browser.mozilla&&"mozilla")||(jQuery.browser.opera&&"opera")||(jQuery.browser.webkit&&"webkit")||"msie";this.locker=a("<div class='ui-social-locker ui-social-locker-"+c+"' style='display: none;'></div>");this.outerWrap=a("<div class='ui-social-locker-outer-wrap'></div>").appendTo(this.locker);this.innerWrap=a("<div class='ui-social-locker-inner-wrap'></div>").appendTo(this.outerWrap);this.locker.addClass(this.options.style);if(!this.options.buttons.counter){this.locker.addClass("ui-social-locker-no-counters");}a.onepress.isTouch()?this.locker.addClass("ui-social-locker-touch"):this.locker.addClass("ui-social-locker-no-touch");var d=a("<div class='ui-social-locker-text'></div>");if(this.options.text.header){d.append(this.options.text.header.addClass("ui-social-locker-strong").clone());}if(this.options.text.message){d.append(this.options.text.message.clone());}this.innerWrap.append(d.addClass());d.prepend((a("<div class='ui-social-locker-before-text'></div>")));d.append((a("<div class='ui-social-locker-after-text'></div>")));this._createButtonMarkup();this.options.bottomText&&this.innerWrap.append(this.options.bottomText.addClass("ui-social-locker-bottom-text"));this.options.locker.close&&this._createClosingCross();this.options.locker.timer&&this._createTimer();var b=(this.element.parent().is("a"))?this.element.parent():this.element;this.locker.insertAfter(b);this._markupIsCreated=true;},_createButtonMarkup:function(){var j=this;this.buttonsWrap=a("<div class='ui-social-locker-buttons'></div>").appendTo(this.innerWrap);for(var f in this.options.buttons.order){var c=this.options.buttons.order[f];if(typeof(c)!="string"){continue;}var h=a.extend({},this.options[c]);h.url=this.options[c].url||this.options.url||this.url;h._provider=this._providers[c];h.like=function(){j._unlock("button",this._provider);};h.dislike=function(){j._lock("button",this._provider);};var b=a("<div class='ui-social-locker-button ui-social-locker-button-"+c+"'></div>");b.data("name",c);this.buttonsWrap.append(b);var g=a("<div class='ui-social-locker-button-inner-wrap'></div>").appendTo(b);g[c+"Button"](h);var d=this.options.effects.flip;var e=a.onepress.tools.has3d();(d&&e&&b.addClass("ui-social-locker-flip"))||b.addClass("ui-social-locker-no-flip");if(!d){continue;}if(a.onepress.isTouch()){var i=a("<a class='ui-social-locker-button-overlay' href='#'></a>").prependTo(g).append(a("<div class='ui-social-locker-overlay-front'></div>")).append(a("<div class='ui-social-locker-overlay-header'></div>")).append(a("<div class='ui-social-locker-overlay-back'></div>"));if(e){i.click(function(){var k=a(this).parents(".ui-social-locker-button");if(k.hasClass("ui-social-locker-flip-hover")){k.removeClass("ui-social-locker-flip-hover");}else{a(".ui-social-locker-flip-hover").removeClass("ui-social-locker-flip-hover");k.addClass("ui-social-locker-flip-hover");}return false;});}else{i.click(function(){var k=a(this);k.stop().animate({opacity:0},200,function(){k.hide();});return false;});}}else{a("<div class='ui-social-locker-button-overlay'></div>").prependTo(g).append(a("<div class='ui-social-locker-overlay-front'></div>")).append(a("<div class='ui-social-locker-overlay-header'></div>")).append(a("<div class='ui-social-locker-overlay-back'></div>"));if(!e){b.hover(function(){var k=a(this).find(".ui-social-locker-button-overlay");k.stop().animate({opacity:0},200,function(){k.hide();});},function(){var k=a(this).find(".ui-social-locker-button-overlay").show();k.stop().animate({opacity:1},200);});}}}},_makeSimilar:function(c,e,b){var d=this;c.css({width:e.outerWidth(false),height:e.outerHeight(false)});if(!b){a(window).resize(function(){d._makeSimilar(c,e,true);});}},_createClosingCross:function(){var b=this;a("<div class='ui-social-locker-cross' title='"+a.onepress.lang.socialLock.close+"' />").prependTo(this.locker).click(function(){if(!b.close||!b.close(b)){b._unlock("cross",true);}});},_createTimer:function(){this.timer=a("<span class='ui-social-locker-timer'></span>");var c=a.onepress.lang.socialLock.orWait;var b=a.onepress.lang.socialLock.seconds;this.timerLabel=a("<span class='ui-social-locker-timer-label'>"+c+" </span>").appendTo(this.timer);this.timerCounter=a("<span class='ui-social-locker-timer-counter'>"+this.options.locker.timer+b+"</span>").appendTo(this.timer);this.timer.appendTo(this.locker);this.counter=this.options.locker.timer;this._kickTimer();},_kickTimer:function(){var b=this;setTimeout(function(){if(!b._isLocked){return;}b.counter--;if(b.counter<=0){b._unlock("timer");}else{b.timerCounter.text(b.counter+a.onepress.lang.socialLock.seconds);if(a.browser.opera){var c=b.timerCounter.clone();c.insertAfter(b.timerCounter);b.timerCounter.remove();b.timerCounter=c;}b._kickTimer();}},1000);},_lock:function(c,b){if(this._isLocked||this._stoppedByWatchdog){return;}if(!this._markupIsCreated){this._createMarkup();}if(c=="button"){b.setState("locked");}this.element.hide();this.isInline?this.locker.css("display","inline-block"):this.locker.fadeIn(1000);this._isLocked=true;if(this.options.events.lock){this.options.events.lock(c,b&&b.name);}},_unlock:function(d,c){var b=this;if(!this._isLocked){this._showContent(true);return false;}if(d=="button"){c.setState("unlocked");}this._showContent(true);this._isLocked=false;if(d=="timer"&&this.options.events.unlockByTimer){return this.options.events.unlockByTimer();}if(d=="close"&&this.options.events.unlockByClose){return this.options.events.unlockByClose();}if(this.options.events.unlock){this.options.events.unlock(d,c&&c.name);}},lock:function(){this._lock("user");},unlock:function(){this._unlock("user");},_showContent:function(h){var g=this;var f=function(){if(g.locker){g.locker.hide();}if(!h){g.element.show();return;}g.element.fadeIn(1000,function(){g.options.effects.highlight&&g.element.effect&&g.element.effect("highlight",{color:"#fffbcc"},800);});};if(!this.options.content){f();}else{if(typeof this.options.content==="string"){this.element.html(this.options.content);f();}else{if(typeof this.options.content==="object"&&!this.options.content.url){this.element.append(this.options.content.clone().show());f();}else{if(typeof this.options.content==="object"&&this.options.content.url){var b=a.extend(true,{},this.options.content);var e=b.success;var c=b.complete;var d=b.error;b.success=function(i,k,j){!e?g.element.html(i):e(g,i,k,j);f();};b.error=function(j,k,i){g._setError("An error is triggered during the ajax request! Text: "+k+" "+i);d&&d(j,k,i);};b.complete=function(i,j){c&&c(i,j);};a.ajax(b);}else{f();}}}}}});a.fn.sociallocker=function(b){b=a.extend({},b);a(this).socialLock(b);};})(jQuery);